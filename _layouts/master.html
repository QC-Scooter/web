<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>{{ page.version }}</title>
    <link rel="stylesheet" href="{{ 'assets/css/master.css' | relative_url }}">
    <link rel="icon" type="image/png" href="{{ 'assets/img/favicon.png' | relative_url }}">
  </head>
  <body>
    <div id="content">
      {{ content }}
      <div id="content-bottom">
        <div id="content-bottom-nav">
          <a href="https://github.com/canvasplus" id="contribute-button">Contribute</a>
          <a id="install-button" href="https://chrome.google.com/webstore/detail/canvas%2B/kdkadcnebmokaadholinmnpjelphnghh">Install for Chrome</a>
          <a id="alt-install-button" href="/browsers"></a>
        </div>
      </div>
    </div>
  </body>
  <script type="text/javascript">
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    if(urlParams.get("from") === "404") {
      let alert = document.createElement("div");
      alert.classList = "content-alert";
      alert.innerHTML = "We couldn't find the page you were looking for. Sorry about that.";
      let content = document.getElementById("content");
      content.insertBefore(alert, content.firstChild);
    }

    //from https://jsfiddle.net/6spj1059/

    // Opera 8.0+
    var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;

    // Firefox 1.0+
    var isFirefox = typeof InstallTrigger !== 'undefined';

    // Safari 3.0+ "[object HTMLElementConstructor]" 
    var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window['safari'] || (typeof safari !== 'undefined' && safari.pushNotification));

    // Internet Explorer 6-11
    var isIE = /*@cc_on!@*/false || !!document.documentMode;

    // Edge 20+
    var isEdge = !isIE && !!window.StyleMedia;

    // Chrome 1 - 71
    var isChrome = !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);

    // Blink engine detection
    var isBlink = (isChrome || isOpera) && !!window.CSS;
    console.log(isChrome);

    if(isFirefox) {
      document.querySelector("#install-button").innerText = "Install for Firefox"
      document.querySelector("#install-button").href = 'https://addons.mozilla.org/en-US/firefox/addon/canvasplus/'
    }
  </script>
</html>
